# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-23
**Phases:** 1-11, 13
**Total Plans:** 46

## Overview

Complete odds comparison tool for Betpawa to analyze and compare its football markets with competitors (SportyBet, Bet9ja). Scrapes odds data on schedule, matches events across platforms using SportRadar IDs, and displays side-by-side comparisons with margin analysis through a React web interface.

## Phases

### Phase 1: Market Mapping Port

**Goal**: Port the 111+ market mappings from TypeScript to Python with equivalent type safety
**Depends on**: Nothing (first phase)
**Plans**: 6 plans

Plans:
- [x] 01-01: Type definitions
- [x] 01-02: Market mappings registry
- [x] 01-03: Parser utilities
- [x] 01-04: Sportybet mapper
- [x] 01-05: Bet9ja mapper
- [x] 01-06: Unified API & Tests

**Details:**
- 108 market mappings implemented
- Unified map_to_betpawa entry point
- 83 passing pytest tests

### Phase 2: Database Schema

**Goal**: Design and implement PostgreSQL schema for events, odds snapshots, and cross-platform matching
**Depends on**: Phase 1 (needs market types defined)
**Plans**: 3 plans

Plans:
- [x] 02-01: Database foundation
- [x] 02-02: Odds snapshot models
- [x] 02-03: Alembic migrations setup

**Details:**
- SQLAlchemy 2.0 with async support
- Event, OddsSnapshot, MarketOdds models
- Alembic async migrations

### Phase 3: Scraper Integration

**Goal**: Integrate existing Python scrapers into FastAPI service with unified data models
**Depends on**: Phase 2 (needs database to store results)
**Plans**: 6 plans

Plans:
- [x] 03-01: FastAPI Foundation
- [x] 03-02: Async scraper clients
- [x] 03-03: Bet9ja client & orchestrator
- [x] 03-04: Scrape endpoint
- [x] 03-05: Health & filtering
- [x] 03-06: Persistence layer

**Details:**
- FastAPI with lifespan context manager
- Async HTTP clients for all platforms
- ScrapingOrchestrator with error handling

### Phase 4: Event Matching Service

**Goal**: Implement cross-platform event matching using SportRadar IDs
**Depends on**: Phase 3 (needs scraped data available)
**Plans**: 2 plans

Plans:
- [x] 04-01: Event matching service
- [x] 04-02: Events API endpoints

**Details:**
- SportRadar ID matching across all three bookmakers
- Events list and detail API endpoints

### Phase 5: Scheduled Scraping

**Goal**: Implement background scheduler for periodic scraping
**Depends on**: Phase 4 (needs full scraping pipeline)
**Plans**: 2 plans

Plans:
- [x] 05-01: Scheduler infrastructure
- [x] 05-02: Scheduler status & control

**Details:**
- APScheduler with IntervalTrigger
- Runtime interval changes via reschedule_job()

### Phase 6: React Foundation

**Goal**: Set up React application with TanStack Query, Tailwind CSS
**Depends on**: Phase 3 (needs API endpoints)
**Plans**: 4 plans

Plans:
- [x] 06-01: Project Setup
- [x] 06-02: UI Foundation
- [x] 06-03: Layout & Routing
- [x] 06-04: API Integration & Dashboard

**Details:**
- Vite + React + TypeScript
- TanStack Query v5 with polling
- shadcn/ui components with Tailwind v4

### Phase 6.1: Cross-Platform Scraping (INSERTED)

**Goal**: Complete SportyBet and Bet9ja scraping using SportRadar IDs
**Depends on**: Phase 6 (needs events in database)
**Plans**: 1 plan

Plans:
- [x] 06.1-01: Cross-platform scraping

**Details:**
- SportyBet fetch_event(sportradar_id)
- Bet9ja EXTID field extraction
- All three platforms matched via SportRadar IDs

### Phase 7: Match Views

**Goal**: Implement match list and detail views with odds comparison
**Depends on**: Phase 6.1 (needs cross-platform data)
**Plans**: 3 plans

Plans:
- [x] 07-01: Events API Odds Enhancement
- [x] 07-02: Match List View Component
- [x] 07-03: Match Detail View Component

**Details:**
- Three-column bookmaker comparison grid
- Color-coded odds (green=best, red=worst)
- Margin analysis per market

### Phase 7.1: Complete Odds Pipeline (INSERTED)

**Goal**: Fix BetPawa odds storage and UI display
**Depends on**: Phase 7 (needs match views)
**Plans**: 1 plan

Plans:
- [x] 07.1-01: Complete Odds Pipeline

**Details:**
- BetPawa odds stored in OddsSnapshot/MarketOdds
- All three bookmakers display side-by-side

### Phase 7.2: Scraping Performance (INSERTED)

**Goal**: Improve scraping speed and logging
**Depends on**: Phase 7.1 (needs complete odds pipeline)
**Plans**: 3 plans

Plans:
- [x] 07.2-01: Backend Performance & Timing
- [x] 07.2-02: SSE Progress Streaming
- [x] 07.2-03: Frontend Scrape Runs UI

**Details:**
- Bet9ja scrape time reduced from ~60s to ~7.5s
- SSE streaming for real-time progress
- Complete scrape runs UI with history

### Phase 8: Scrape Runs UI Improvements

**Goal**: Improve scrape runs page and dashboard widget
**Depends on**: Phase 7.2 (needs scrape runs foundation)
**Plans**: 3 plans

Plans:
- [x] 08-01: Live Progress Visualization
- [x] 08-02: Historical Analytics
- [x] 08-03: Platform-Specific Retry

**Details:**
- Per-platform progress bars
- Analytics charts (duration, success rates)
- Platform-specific retry for failures

### Phase 9: Matches Page Improvements

**Goal**: Fix filters, add region/league display, add search
**Depends on**: Phase 7 (extends match views)
**Plans**: 2 plans

Plans:
- [x] 9-01: Search and Region Column
- [x] 9-02: Enhanced Match Filters

**Details:**
- Team name search with ILIKE
- Multi-select filter with Popover + Command
- Date preset helpers

### Phase 10: Settings Page

**Goal**: Build functional settings page
**Depends on**: Phase 6 (extends React foundation)
**Plans**: 2 plans

Plans:
- [x] 10-01: Settings Backend
- [x] 10-02: Settings UI

**Details:**
- Single-row singleton pattern for settings
- Runtime APScheduler interval changes

### Phase 11: UI Polish

**Goal**: Fix UI issues, ensure widgets work
**Depends on**: Phase 6 (extends React foundation)
**Plans**: 3 plans

Plans:
- [x] 11-01: Rebrand & Sidebar Fix
- [x] 11-02: Dashboard Layout Restructure
- [x] 11-03: Compact Analytics

**Details:**
- Rebranded to "pawaRisk"
- Three-tier dashboard layout
- Compact analytics charts

### Phase 13: Scraping Logging & Workflow

**Goal**: Restructure backend scraping with proper logging
**Depends on**: Phase 8 (fixes scrape runs UI issues)
**Plans**: 4 plans

Plans:
- [x] 13-01: Scraping Infrastructure
- [x] 13-02: Orchestrator Logging Integration
- [x] 13-03: Dashboard Redesign
- [x] 13-04: Frontend Phase Display

**Details:**
- ScrapePhase StrEnum for workflow state
- structlog with JSON/console output
- Timeline and LiveLog components

---

## Milestone Summary

**Decimal Phases:**
- Phase 6.1: Cross-Platform Scraping (inserted for SportyBet/Bet9ja scraping)
- Phase 7.1: Complete Odds Pipeline (inserted for BetPawa odds storage)
- Phase 7.2: Scraping Performance (inserted for speed improvements)

**Key Decisions:**
- StrEnum for error codes (Python 3.11+)
- MappingError exception instead of TypeScript Result pattern
- Frozen dataclasses for simple parsed value objects
- SSE streaming for real-time scrape progress
- Betpawa-first metadata priority
- Static Tailwind class lookup for JIT-compatible dynamic styling

**Issues Resolved:**
- SportyBet/Bet9ja scraping stubbed out (Phase 6.1)
- BetPawa odds not stored (Phase 7.1)
- ~5min scrape time too slow (Phase 7.2)
- Sidebar covering page content (Phase 11)

**Issues Deferred:**
- Phase 12: Competitor Event Import (deferred to v1.1)

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
