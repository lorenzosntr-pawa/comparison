---
phase: 27-dashboard-coverage-widgets
plan: 01
type: execute
---

<objective>
Replace dashboard placeholder widgets with live data from the Coverage API.

Purpose: Dashboard stats should show the same accurate, live numbers as the Coverage Comparison page.
Output: Dashboard StatsCards using useCoverage hook with matching Total Events and Matched Events display.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/27-dashboard-coverage-widgets/27-CONTEXT.md
@.planning/phases/26-tournament-gaps-cards/26-01-SUMMARY.md

**Key files:**
@web/src/features/dashboard/components/stats-cards.tsx - Current implementation using useEventsStats
@web/src/features/dashboard/hooks/use-events-stats.ts - Current hook making 2 API calls
@web/src/features/coverage/components/stats-cards.tsx - Coverage page cards with CoverageStats
@web/src/features/coverage/hooks/use-coverage.ts - Hook using api.getCoverage()

**Current state:**
- Dashboard StatsCards uses useEventsStats() hook (2 separate API calls to /events endpoint)
- Coverage page uses useCoverage() hook (single call to /coverage endpoint)
- Coverage cards have richer data: Total Events, Matched (with match rate %), BetPawa Only, SportyBet Gaps, Bet9ja Gaps

**Target state:**
- Dashboard StatsCards uses useCoverage() hook from coverage feature
- Shows Total Events and Matched Events cards with same styling as coverage page
- Numbers match between dashboard and coverage page exactly

**Established patterns:**
- TanStack Query v5 with refetchInterval for polling
- useCoverage hook already exists and is well-tested
- Coverage stats cards use BarChart3 icon for Total, CheckCircle icon (green) for Matched
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update dashboard StatsCards to use useCoverage hook</name>
  <files>web/src/features/dashboard/components/stats-cards.tsx</files>
  <action>
Replace the current useEventsStats hook with useCoverage from the coverage feature:
1. Import useCoverage from '@/features/coverage/hooks' instead of useEventsStats from '../hooks'
2. Call useCoverage() to get coverage data (no params needed - dashboard shows unfiltered stats)
3. Update Total Events card to use coverage?.total_events, BarChart3 icon (text-muted-foreground)
4. Update Matched Events card to use coverage?.matched_count, CheckCircle icon (text-green-500), value in text-green-600
5. Add match rate subtitle showing coverage?.match_rate.toFixed(1) + '% match rate' (matching coverage page format)
6. Remove useEventsStats import/usage (will be unused after this change)

Keep the 2-column grid layout (md:grid-cols-2) as it currently is.
Do NOT add the BetPawa Only or Gaps cards - only Total Events and Matched as specified in context.
  </action>
  <verify>npm run build succeeds, dashboard page loads without errors</verify>
  <done>Dashboard StatsCards imports useCoverage and displays Total Events/Matched Events using coverage API data</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Dashboard stats cards using live coverage data</what-built>
  <how-to-verify>
    1. Run: cd web && npm run dev
    2. Visit: http://localhost:5173/
    3. Note the Total Events and Matched Events numbers on dashboard
    4. Navigate to Coverage Comparison page (sidebar)
    5. Verify: Total Events number matches between pages
    6. Verify: Matched Events number matches between pages
    7. Verify: Match rate percentage on dashboard matches coverage page
    8. Check: Cards have proper styling (green color for Matched value)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `cd web && npm run build` succeeds without errors
- [ ] Dashboard loads and displays stats cards
- [ ] Total Events and Matched Events match Coverage page values exactly
- [ ] Match rate percentage displayed correctly
</verification>

<success_criteria>

- Dashboard StatsCards uses useCoverage hook
- Total Events card shows coverage.total_events
- Matched Events card shows coverage.matched_count with match rate
- Numbers on dashboard match Coverage Comparison page exactly
- Phase 27 complete, v1.3 Coverage Improvements milestone complete
  </success_criteria>

<output>
After completion, create `.planning/phases/27-dashboard-coverage-widgets/27-01-SUMMARY.md`:

# Phase 27 Plan 01: Dashboard Coverage Widgets Summary

**[Substantive one-liner]**

## Performance

- **Duration:** X min
- **Tasks:** 2
- **Files modified:** 1

## Accomplishments

- [Key outcomes]

## Task Commits

1. **Task 1:** commit hash (type)

## Files Created/Modified

- `web/src/features/dashboard/components/stats-cards.tsx` - Updated to use useCoverage hook

## Decisions Made

[Any decisions, or "None"]

## Deviations from Plan

[Any deviations, or "None"]

## Issues Encountered

[Any issues, or "None"]

## Next Phase Readiness

- Phase 27 complete
- v1.3 Coverage Improvements milestone complete
- Ready for v1.4 milestone planning
</output>
