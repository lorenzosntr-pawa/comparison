---
phase: 33.1-fix-issue-iss-003
plan: 01
subsystem: ui
tags: [scheduler, job-id, frontend, bugfix]

requires:
  - phase: 33-per-platform-progress
    provides: scheduler UI components with job display
provides:
  - Correct scheduler job ID references in frontend
  - Named job lookup instead of index-based access
affects: []

tech-stack:
  added: []
  patterns:
    - "Named job lookup by ID instead of array index access"

key-files:
  created: []
  modified:
    - web/src/features/settings/components/scheduler-control.tsx
    - web/src/features/dashboard/components/recent-runs.tsx

key-decisions:
  - "Use find() by job ID instead of jobs[0] index access for deterministic job resolution"

patterns-established:
  - "Named job lookup: always find scheduler jobs by ID, never by array index"

issues-created: []

duration: 4min
completed: 2026-01-28
---

# Phase 33.1 Plan 1: Fix Scheduler Interval Display Summary

**Fixed stale job ID `scrape_odds` → `scrape_all_platforms` and replaced non-deterministic `jobs[0]` with named lookup**

## Performance

- **Duration:** 4 min
- **Started:** 2026-01-28T14:00:00Z
- **Completed:** 2026-01-28T14:04:00Z
- **Tasks:** 1
- **Files modified:** 2

## Accomplishments
- Fixed scheduler-control.tsx job ID from `scrape_odds` to `scrape_all_platforms`
- Replaced all `scheduler?.jobs[0]` index access in recent-runs.tsx with `find()` by job ID
- Scheduler UI now displays correct scrape interval instead of 2-minute watchdog interval

## Task Commits

Each task was committed atomically:

1. **Task 1: Fix job ID references in frontend components** - `7883ae3` (fix)

## Files Created/Modified
- `web/src/features/settings/components/scheduler-control.tsx` - Changed job ID lookup from `scrape_odds` to `scrape_all_platforms`
- `web/src/features/dashboard/components/recent-runs.tsx` - Replaced `jobs[0]` index access with named `find()` lookup by job ID

## Decisions Made
- Used IIFE pattern in JSX for recent-runs.tsx to keep the `scrapeJob` variable scoped within the render block

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
- Pre-existing TypeScript build error (TS2367 on line 226 of recent-runs.tsx for `connection_failed` type) — not caused by this change, existed before fix

## Next Phase Readiness
- ISS-003 resolved
- Phase 33.1 complete, milestone ready for completion

---
*Phase: 33.1-fix-issue-iss-003*
*Completed: 2026-01-28*
