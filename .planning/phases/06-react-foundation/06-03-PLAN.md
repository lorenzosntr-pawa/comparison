---
phase: 06-react-foundation
plan: 03
type: execute
---

<objective>
Set up React Router with collapsible sidebar layout and page shell components.

Purpose: Establish the navigation structure and layout patterns that all pages use.
Output: Working sidebar navigation with icon-collapse mode, route configuration, page shells.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-react-foundation/06-RESEARCH.md
@.planning/phases/06-react-foundation/06-CONTEXT.md
@.planning/phases/06-react-foundation/06-01-SUMMARY.md
@.planning/phases/06-react-foundation/06-02-SUMMARY.md

**Key research findings:**
- React Router v7 imports from 'react-router' NOT 'react-router-dom'
- shadcn Sidebar component has built-in `collapsible="icon"` mode
- SidebarProvider must wrap entire layout (not just sidebar) for state persistence

**From 06-CONTEXT.md:**
- Four pages: Dashboard, Match List, Match Detail, Settings
- Collapsible sidebar: full labels when expanded, icons when collapsed
- Professional trading terminal aesthetic

**Navigation items:**
- Dashboard (/) - Home icon
- Matches (/matches) - List icon
- Settings (/settings) - Settings icon
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install React Router and add shadcn Sidebar component</name>
  <files>web/package.json, web/src/components/ui/sidebar.tsx</files>
  <action>
1. Install React Router v7:
   `pnpm install react-router`

2. Add shadcn sidebar component:
   `npx shadcn@latest add sidebar`

   This adds several files including sidebar.tsx and required dependencies.

   If CLI fails on Windows, the sidebar component is complex - use WSL or check shadcn docs for manual installation.

3. Add sheet component (sidebar uses it for mobile):
   `npx shadcn@latest add sheet`

4. Add tooltip component (sidebar uses it for collapsed state):
   `npx shadcn@latest add tooltip`

5. Verify sidebar component exists at src/components/ui/sidebar.tsx
  </action>
  <verify>Files exist: src/components/ui/sidebar.tsx, src/components/ui/sheet.tsx, src/components/ui/tooltip.tsx</verify>
  <done>React Router v7 installed, shadcn Sidebar and dependencies added</done>
</task>

<task type="auto">
  <name>Task 2: Create AppSidebar with navigation items</name>
  <files>web/src/components/layout/app-sidebar.tsx, web/src/components/layout/index.ts</files>
  <action>
1. Create src/components/layout/app-sidebar.tsx:
```typescript
import { Home, List, Settings, Activity } from 'lucide-react'
import { NavLink, useLocation } from 'react-router'
import {
  Sidebar,
  SidebarContent,
  SidebarGroup,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarRail,
} from '@/components/ui/sidebar'

const navItems = [
  { title: 'Dashboard', url: '/', icon: Home },
  { title: 'Matches', url: '/matches', icon: List },
  { title: 'Settings', url: '/settings', icon: Settings },
]

export function AppSidebar() {
  const location = useLocation()

  return (
    <Sidebar collapsible="icon">
      <SidebarHeader className="border-b border-sidebar-border">
        <div className="flex items-center gap-2 px-2 py-2">
          <Activity className="h-6 w-6 text-primary" />
          <span className="font-bold text-lg group-data-[collapsible=icon]:hidden">
            Betpawa Odds
          </span>
        </div>
      </SidebarHeader>
      <SidebarContent>
        <SidebarGroup>
          <SidebarGroupLabel>Navigation</SidebarGroupLabel>
          <SidebarGroupContent>
            <SidebarMenu>
              {navItems.map((item) => (
                <SidebarMenuItem key={item.title}>
                  <SidebarMenuButton
                    asChild
                    isActive={location.pathname === item.url}
                    tooltip={item.title}
                  >
                    <NavLink to={item.url}>
                      <item.icon />
                      <span>{item.title}</span>
                    </NavLink>
                  </SidebarMenuButton>
                </SidebarMenuItem>
              ))}
            </SidebarMenu>
          </SidebarGroupContent>
        </SidebarGroup>
      </SidebarContent>
      <SidebarRail />
    </Sidebar>
  )
}
```

2. Create src/components/layout/index.ts:
```typescript
export { AppSidebar } from './app-sidebar'
```
  </action>
  <verify>Import { AppSidebar } from '@/components/layout' works without TypeScript errors</verify>
  <done>AppSidebar component with Dashboard/Matches/Settings navigation, active state highlighting</done>
</task>

<task type="auto">
  <name>Task 3: Create layout wrapper and route configuration</name>
  <files>web/src/components/layout/app-layout.tsx, web/src/routes.tsx, web/src/App.tsx, web/src/features/dashboard/index.tsx, web/src/features/matches/index.tsx, web/src/features/settings/index.tsx</files>
  <action>
1. Create src/components/layout/app-layout.tsx:
```typescript
import { SidebarInset, SidebarProvider, SidebarTrigger } from '@/components/ui/sidebar'
import { AppSidebar } from './app-sidebar'
import { ModeToggle } from '@/components/mode-toggle'
import { Separator } from '@/components/ui/separator'

interface AppLayoutProps {
  children: React.ReactNode
}

export function AppLayout({ children }: AppLayoutProps) {
  return (
    <SidebarProvider>
      <AppSidebar />
      <SidebarInset>
        <header className="flex h-14 shrink-0 items-center gap-2 border-b px-4">
          <SidebarTrigger className="-ml-1" />
          <Separator orientation="vertical" className="mr-2 h-4" />
          <div className="flex-1" />
          <ModeToggle />
        </header>
        <main className="flex-1 overflow-auto p-4">
          {children}
        </main>
      </SidebarInset>
    </SidebarProvider>
  )
}
```

2. Add to src/components/layout/index.ts:
```typescript
export { AppSidebar } from './app-sidebar'
export { AppLayout } from './app-layout'
```

3. Add separator component:
   `npx shadcn@latest add separator`

4. Create placeholder page components:

src/features/dashboard/index.tsx:
```typescript
export function Dashboard() {
  return (
    <div className="space-y-4">
      <h1 className="text-2xl font-bold">Dashboard</h1>
      <p className="text-muted-foreground">
        System status and quick stats will appear here.
      </p>
    </div>
  )
}
```

src/features/matches/index.tsx:
```typescript
export function MatchList() {
  return (
    <div className="space-y-4">
      <h1 className="text-2xl font-bold">Matches</h1>
      <p className="text-muted-foreground">
        Match list with odds comparison will appear here.
      </p>
    </div>
  )
}

export function MatchDetail() {
  return (
    <div className="space-y-4">
      <h1 className="text-2xl font-bold">Match Detail</h1>
      <p className="text-muted-foreground">
        Detailed market odds comparison will appear here.
      </p>
    </div>
  )
}
```

src/features/settings/index.tsx:
```typescript
export function Settings() {
  return (
    <div className="space-y-4">
      <h1 className="text-2xl font-bold">Settings</h1>
      <p className="text-muted-foreground">
        Scheduler controls and configuration will appear here.
      </p>
    </div>
  )
}
```

5. Create src/routes.tsx:
```typescript
import { Routes, Route } from 'react-router'
import { Dashboard } from '@/features/dashboard'
import { MatchList, MatchDetail } from '@/features/matches'
import { Settings } from '@/features/settings'

export function AppRoutes() {
  return (
    <Routes>
      <Route path="/" element={<Dashboard />} />
      <Route path="/matches" element={<MatchList />} />
      <Route path="/matches/:id" element={<MatchDetail />} />
      <Route path="/settings" element={<Settings />} />
    </Routes>
  )
}
```

6. Update src/App.tsx to use layout and routes:
```typescript
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { ReactQueryDevtools } from '@tanstack/react-query-devtools'
import { BrowserRouter } from 'react-router'
import { ThemeProvider } from '@/components/theme-provider'
import { AppLayout } from '@/components/layout'
import { AppRoutes } from '@/routes'

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5,
      gcTime: 1000 * 60 * 10,
      retry: 1,
      refetchOnWindowFocus: false,
    },
  },
})

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <BrowserRouter>
        <ThemeProvider defaultTheme="system" storageKey="betpawa-ui-theme">
          <AppLayout>
            <AppRoutes />
          </AppLayout>
        </ThemeProvider>
      </BrowserRouter>
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  )
}
```
  </action>
  <verify>Navigate between Dashboard/Matches/Settings using sidebar, sidebar collapse/expand works, active state shows on current page</verify>
  <done>AppLayout with sidebar, routes configured, placeholder pages render, navigation works</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm run dev` shows sidebar layout
- [ ] `pnpm run build` succeeds without errors
- [ ] Sidebar collapse/expand works (click rail or trigger button)
- [ ] Navigation between Dashboard, Matches, Settings works
- [ ] Active page highlighted in sidebar
- [ ] /matches/:id route accessible (shows MatchDetail)
- [ ] Theme toggle in header still works
- [ ] Sidebar state persists during navigation
</verification>

<success_criteria>

- React Router v7 configured with all routes
- shadcn Sidebar with icon-collapse mode working
- AppLayout wraps all pages with consistent header
- Navigation shows active state
- Placeholder page components for Dashboard, Matches, Settings
- Theme toggle accessible in header
</success_criteria>

<output>
After completion, create `.planning/phases/06-react-foundation/06-03-SUMMARY.md`:

# Phase 6 Plan 03: Layout & Routing Summary

**[Substantive summary of what was accomplished]**

## Accomplishments
- [Key outcomes]

## Files Created/Modified
- `web/src/components/layout/app-sidebar.tsx` - Sidebar navigation
- `web/src/components/layout/app-layout.tsx` - Main layout wrapper
- `web/src/routes.tsx` - Route configuration
- `web/src/features/*/index.tsx` - Placeholder pages

## Decisions Made
[Any deviations or choices made]

## Issues Encountered
[Problems and resolutions, or "None"]

## Next Step
Ready for 06-04-PLAN.md (API Integration & Dashboard)
</output>
