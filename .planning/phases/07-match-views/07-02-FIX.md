---
phase: 07-match-views
plan: 02-FIX
type: fix
---

<objective>
Fix 1 UAT issue from plan 07-02.

Source: 07-ISSUES.md
Priority: 0 critical, 1 major, 0 minor
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/07-match-views/07-ISSUES.md

**Original plan for reference:**
@.planning/phases/07-match-views/07-02-PLAN.md

**Key source files:**
@web/src/features/matches/components/match-table.tsx
@src/api/routes/events.py
</context>

<tasks>

<task type="auto">
  <name>Fix UAT-001: Match list table doesn't display inline odds columns</name>
  <files>web/src/features/matches/components/match-table.tsx</files>
  <action>
Fix the market ID mismatch between frontend and backend.

**Root cause:**
- Backend API (`src/api/routes/events.py` line 32) returns inline_odds with Betpawa market IDs:
  - `"3743"` = 1X2 Full Time
  - `"5000"` = Over/Under Full Time
  - `"3795"` = Both Teams To Score Full Time
- Frontend (`match-table.tsx` line 7-11) looks for different IDs:
  - `"1"` = 1X2
  - `"18"` = O/U 2.5
  - `"29"` = BTTS

**Fix:**
Update MARKET_CONFIG in `web/src/features/matches/components/match-table.tsx` to use the correct Betpawa market IDs:

```typescript
const MARKET_CONFIG = {
  '3743': { id: '3743', label: '1X2', outcomes: ['1', 'X', '2'] },
  '5000': { id: '5000', label: 'O/U 2.5', outcomes: ['Over', 'Under'] },
  '3795': { id: '3795', label: 'BTTS', outcomes: ['Yes', 'No'] },
} as const
```

Also update the default visibleColumns passed to MatchTable:
- In the parent component (matches/index.tsx useColumnSettings hook), the defaults use `['1', '18', '29']`
- These need to change to `['3743', '5000', '3795']`

Check `use-column-settings.ts` for the default values and localStorage key handling.
  </action>
  <verify>
1. Run: npm run dev in web/
2. Visit: http://localhost:5173 (matches page)
3. Verify: Odds columns now display for all three bookmakers
4. Verify: Color coding (green/red) shows correctly based on Betpawa vs competitors
5. Test: Trigger a scrape and refresh - new odds should display
  </verify>
  <done>
Match list table displays inline odds columns (1X2, O/U 2.5, BTTS) for all bookmakers. Market IDs aligned between frontend and backend.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Odds columns display in match list table
- [ ] All three bookmakers (BP, SB, B9) show odds
- [ ] Color coding works (green = Betpawa better, red = Betpawa worse)
- [ ] Column settings still work with new market IDs
- [ ] npm run build passes without errors
</verification>

<success_criteria>
- UAT-001 resolved: Match list displays inline odds columns
- No regression in existing functionality
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/07-match-views/07-02-FIX-SUMMARY.md`
</output>
