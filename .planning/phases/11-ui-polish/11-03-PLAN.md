---
phase: 12-ui-polish
plan: 03
type: execute
domain: react
---

<objective>
Make Scrape Runs analytics compact and fix any remaining polish issues.

Purpose: Reduce visual prominence of analytics widgets and complete UI polish pass.
Output: Compact analytics section on Scrape Runs page, consistent spacing/alignment across app.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-ui-polish/12-CONTEXT.md
@.planning/phases/12-ui-polish/12-01-PLAN.md
@.planning/phases/12-ui-polish/12-02-PLAN.md

# Key files for this plan:
@web/src/features/scrape-runs/index.tsx
@web/src/features/scrape-runs/components/analytics-charts.tsx

**Current analytics layout:**
```
Analytics                                    [Period Selector]
┌─────────────────────┐ ┌─────────────────────┐
│   Duration Trend    │ │    Run Status       │
│   (200px height)    │ │    (200px height)   │
└─────────────────────┘ └─────────────────────┘
┌─────────────────────────────────────────────┐
│           Platform Health (150px)            │
└─────────────────────────────────────────────┘
```

**Target compact layout:**
```
Analytics [Period Selector]
┌────────────┐ ┌────────────┐ ┌────────────────────────────┐
│ Duration   │ │ Run Status │ │ Platform Health (horizontal)│
│ (120px)    │ │ (120px)    │ │ (120px)                    │
└────────────┘ └────────────┘ └────────────────────────────┘
```

**Changes needed:**
1. Reduce chart heights from 200px to 120px
2. Make all three charts fit in a single row (grid-cols-3)
3. Simplify chart styling (smaller fonts, less padding)

**Established patterns:**
- Recharts ResponsiveContainer for charts
- Card components from shadcn
- Tailwind grid for layout
</context>

<tasks>

<task type="auto">
  <name>Task 1: Make analytics charts compact</name>
  <files>web/src/features/scrape-runs/components/analytics-charts.tsx</files>
  <action>
Reduce chart heights and simplify for compact display:

1. Change chart heights from 200px/150px to 120px for all charts

2. In DurationTrendChart:
   - Change ResponsiveContainer height to 120
   - CardHeader: Add pb-1 to reduce padding
   - Consider removing CartesianGrid for cleaner look

3. In SuccessRateChart:
   - Change ResponsiveContainer height to 120
   - CardHeader: Add pb-1
   - Remove or shrink Legend (add verticalAlign="top" iconSize={8} wrapperStyle={{fontSize: '10px'}})

4. In PlatformHealthChart:
   - Change ResponsiveContainer height to 120
   - CardHeader: Add pb-1
   - The horizontal bar chart will fit better at this height

5. Update empty state heights to match (flex h-[120px])

6. Reduce font sizes in axes where possible (tick={{ fontSize: 10 }})
  </action>
  <verify>All charts render at 120px height with good proportions</verify>
  <done>Analytics charts reduced to compact 120px height</done>
</task>

<task type="auto">
  <name>Task 2: Update Scrape Runs page layout for compact analytics</name>
  <files>web/src/features/scrape-runs/index.tsx</files>
  <action>
Update the page layout to put all three charts in a single row:

Change from:
```tsx
<div className="grid gap-4 md:grid-cols-2">
  <DurationTrendChart ... />
  <SuccessRateChart ... />
</div>
<PlatformHealthChart ... />
```

To:
```tsx
<div className="grid gap-4 md:grid-cols-3">
  <DurationTrendChart ... />
  <SuccessRateChart ... />
  <PlatformHealthChart ... />
</div>
```

Also:
- Move the period selector into the same line as "Analytics" heading
- Make heading smaller (text-base instead of text-lg)

Updated section:
```tsx
{/* Analytics Section */}
<div className="space-y-3">
  <div className="flex items-center justify-between">
    <h2 className="text-base font-medium">Analytics</h2>
    <Select ...>...</Select>
  </div>

  <div className="grid gap-3 md:grid-cols-3">
    <DurationTrendChart ... />
    <SuccessRateChart ... />
    <PlatformHealthChart ... />
  </div>
</div>
```

Note the smaller gap (gap-3 instead of gap-4) for tighter layout.
  </action>
  <verify>Analytics section shows three charts in a row, more compact overall</verify>
  <done>Scrape Runs page has compact single-row analytics section</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Compact analytics charts on Scrape Runs page</what-built>
  <how-to-verify>
    1. Run: cd web && npm run dev
    2. Visit /scrape-runs
    3. Check analytics section:
       - All three charts in one row (on medium+ screens)
       - Charts are smaller/more compact (~120px tall)
       - Charts still readable and functional
       - Tooltips still work on hover
    4. Test period selector - charts update correctly
    5. Check responsive behavior:
       - On narrow screens, charts should stack
       - Charts should remain readable at all sizes
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Analytics charts are ~120px tall
- [ ] All three charts fit in single row on medium+ screens
- [ ] Charts remain readable and functional
- [ ] Tooltips work correctly
- [ ] Period selector works
- [ ] Responsive behavior maintained
</verification>

<success_criteria>

- Analytics section is more compact and less prominent
- Three charts fit in single row
- Page feels more balanced with table as primary focus
- No functionality lost
</success_criteria>

<output>
After completion, create `.planning/phases/12-ui-polish/12-03-SUMMARY.md`
</output>
