# Phase 34.1: API/UI Data Flow Audit - Context

**Gathered:** 2026-01-28
**Status:** Ready for planning

<vision>
## How This Should Work

Two-pronged investigation approach:
1. **Follow the data** — Trace specific matches from DB → API → UI, find exactly where values diverge from truth
2. **Compare outputs** — Run identical queries via raw SQL vs API vs frontend display, systematically spot differences

The goal is forensic: understand precisely WHERE in the pipeline accuracy degrades, across both the Odds Comparison and Coverage pages.

</vision>

<essential>
## What Must Be Nailed

- **Find root cause(s)** — Pinpoint exactly where data goes wrong (query logic? transformation? caching? state management?)
- **Document all discrepancies** — Comprehensive list of every issue found across both affected pages
- **Clear fix path** — Each finding should point to actionable remediation for Phase 35+

All three outcomes are equally important — thorough investigation with actionable results.

</essential>

<boundaries>
## What's Out of Scope

- **Implementing fixes** — This phase finds problems; Phase 35+ implements solutions
- **New features or UI changes** — Audit existing functionality only
- **Backend matching logic** — Phase 34 already confirmed 99.9% accuracy; this focuses on API/UI layer

</boundaries>

<specifics>
## Specific Ideas

No preconceptions about where the problem lies — open investigation across:
- API query logic (SQL/SQLAlchemy)
- Frontend state management (React Query caching)
- Data transformation/schema mapping
- Any other layer that handles the data

</specifics>

<notes>
## Additional Context

**Trigger:** UAT of Phase 34 revealed frontend displays bad data despite backend being healthy.

**Symptoms observed during UAT:**
- Wrong odds values displayed
- Missing matches that should appear
- Stale data not refreshing
- Wrong coverage matching and mapping

**Affected pages:**
- Odds Comparison page
- Coverage page

</notes>

---

*Phase: 34.1-api-ui-data-flow-audit*
*Context gathered: 2026-01-28*
