---
phase: 26-tournament-gaps-cards
plan: 01
type: execute
---

<objective>
Add tournament-level coverage summary cards showing gap analysis per competitor.

Purpose: Give users a quick view of tournament coverage gaps alongside event coverage stats.
Output: TournamentStatsCards component displaying Total, Matched, BetPawa Only, SportyBet Gaps, Bet9ja Gaps.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-tournament-gaps-cards/26-CONTEXT.md

# Prior phase context (Coverage page patterns)
@.planning/phases/25-include-started-toggle/25-01-SUMMARY.md
@.planning/phases/24-country-filters-ux/24-01-SUMMARY.md

# Source files to reference
@web/src/features/coverage/index.tsx
@web/src/features/coverage/components/stats-cards.tsx
@web/src/features/coverage/components/index.ts
@web/src/types/api.ts

**Established patterns:**
- Card styling: Card, CardHeader, CardTitle, CardContent from shadcn/ui
- Stats computation: useMemo from React
- Icon pattern: lucide-react icons in card headers

**Key types from api.ts:**
- `TournamentGroup` has `events: PalimpsestEvent[]`
- `PalimpsestEvent` has `availability` and `platforms: string[]`

**Tournament classification logic:**
For each tournament, determine platform coverage from events:
- `hasBetPawa` = any event has "betpawa" in platforms
- `hasSportyBet` = any event has "sportybet" in platforms
- `hasBet9ja` = any event has "bet9ja" in platforms

Then categorize:
- Matched = hasBetPawa AND (hasSportyBet OR hasBet9ja)
- BetPawa Only = hasBetPawa AND NOT hasSportyBet AND NOT hasBet9ja
- SportyBet Gap = hasSportyBet AND NOT hasBetPawa
- Bet9ja Gap = hasBet9ja AND NOT hasBetPawa

**Filter behavior:**
Tournament stats computed from `filteredTournaments` (already respects country filter and includeStarted).
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TournamentStatsCards component</name>
  <files>web/src/features/coverage/components/tournament-stats-cards.tsx, web/src/features/coverage/components/index.ts</files>
  <action>
Create TournamentStatsCards component that:
1. Accepts `tournaments: TournamentGroup[]` and `isLoading: boolean` props
2. Computes tournament stats internally using useMemo:
   - Iterate tournaments, for each determine hasBetPawa/hasSportyBet/hasBet9ja from events.platforms
   - Count: total, matched, betpawaOnly, sportyBetGaps, bet9jaGaps
3. Render 5 cards in same grid layout as CoverageStatsCards (grid-cols-2 md:grid-cols-4 lg:grid-cols-5)
4. Card styling matches stats-cards.tsx pattern (Card, CardHeader w/ icon, CardContent w/ count + description)
5. Use different icons to distinguish from event cards:
   - Total: Trophy (tournaments)
   - Matched: CheckCircle2 (green)
   - BetPawa Only: Building2 (blue)
   - SportyBet Gaps: AlertTriangle (orange)
   - Bet9ja Gaps: AlertTriangle (orange)
6. Export from components/index.ts

Use Skeleton loading state matching stats-cards.tsx pattern.
  </action>
  <verify>File exists, TypeScript compiles: cd web && npx tsc --noEmit</verify>
  <done>TournamentStatsCards component created and exported</done>
</task>

<task type="auto">
  <name>Task 2: Integrate TournamentStatsCards into coverage page</name>
  <files>web/src/features/coverage/index.tsx</files>
  <action>
1. Import TournamentStatsCards from ./components
2. Add TournamentStatsCards below CoverageStatsCards in JSX
3. Pass filteredTournaments and eventsPending as props:
   ```tsx
   <TournamentStatsCards
     tournaments={filteredTournaments}
     isLoading={eventsPending}
   />
   ```
4. Optionally add a subtle visual separator or section label between event and tournament cards
  </action>
  <verify>npm run dev, visit /coverage, verify 10 cards render (5 event + 5 tournament)</verify>
  <done>Tournament stats cards visible below event stats cards, counts populate correctly</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `cd web && npm run build` succeeds without errors
- [ ] Coverage page shows 10 cards in two rows
- [ ] Tournament counts are reasonable (e.g., Total Tournaments > 0, gaps show competitor-only tournaments)
- [ ] Country filter affects tournament stats (selecting a country reduces tournament counts)
- [ ] Include Started toggle affects tournament stats
</verification>

<success_criteria>

- TournamentStatsCards component created with proper TypeScript types
- Component exported from coverage/components/index.ts
- Coverage page displays tournament stats cards below event stats cards
- Stats update when filters change (country, includeStarted)
- Visual consistency with existing event stats cards
</success_criteria>

<output>
After completion, create `.planning/phases/26-tournament-gaps-cards/26-01-SUMMARY.md`:

# Phase 26 Plan 01: Tournament Gaps Cards Summary

**[Substantive one-liner describing what shipped]**

## Performance

- **Duration:** X min
- **Tasks:** 2
- **Files modified:** 3

## Accomplishments

- [Key outcomes]

## Task Commits

1. **Task 1:** commit hash (type)
2. **Task 2:** commit hash (type)

## Files Created/Modified

- `web/src/features/coverage/components/tournament-stats-cards.tsx` - New component
- `web/src/features/coverage/components/index.ts` - Export added
- `web/src/features/coverage/index.tsx` - Integration

## Decisions Made

- Filter behavior: tournament stats respect country and includeStarted filters
- Icon choice: Trophy for Total Tournaments, same icons as event cards for others

## Deviations from Plan

[Any deviations, or "None"]

## Issues Encountered

[Any issues, or "None"]

## Next Phase Readiness

- Phase 26 complete
- Ready for Phase 27: Dashboard Coverage Widgets

---
*Phase: 26-tournament-gaps-cards*
*Completed: YYYY-MM-DD*
</output>
