---
phase: 103-mapping-dashboard
plan: 02
type: execute
---

<objective>
Create the Mapping Dashboard page with stats cards showing mapping coverage overview.

Purpose: Provide users with at-a-glance view of mapping system health and coverage.
Output: New /mappings route with MappingDashboard page and MappingStatsCards component
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/103-mapping-dashboard/103-01-SUMMARY.md

# UI patterns to follow:
@web/src/features/coverage/components/stats-cards.tsx
@web/src/features/coverage/index.tsx
@web/src/components/layout/app-sidebar.tsx
@web/src/routes.tsx

**Tech stack available:** React, TanStack Query v5, shadcn/ui, Tailwind v4, lucide-react icons
**Established patterns:** Stats cards with Card/CardHeader/CardContent, hooks in features/*/hooks/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Mapping Dashboard page with routing</name>
  <files>web/src/features/mappings/index.tsx, web/src/features/mappings/hooks/index.ts, web/src/features/mappings/hooks/use-mapping-stats.ts, web/src/routes.tsx, web/src/components/layout/app-sidebar.tsx</files>
  <action>
1. Create feature folder structure:
   - web/src/features/mappings/index.tsx (MappingDashboard page component)
   - web/src/features/mappings/hooks/index.ts (barrel export)
   - web/src/features/mappings/hooks/use-mapping-stats.ts (TanStack Query hook)
   - web/src/features/mappings/components/index.ts (barrel export, empty for now)

2. Create useMappingStats hook:
   - Uses useQuery with queryKey ['mapping-stats']
   - Fetches GET /api/mappings/stats
   - Returns { data, isLoading, error }

3. Create MappingDashboard page:
   - Page title "Market Mappings"
   - Placeholder for stats cards (to be implemented in Task 2)
   - Uses useMappingStats hook

4. Add route /mappings -> MappingDashboard in routes.tsx

5. Add navigation item to sidebar:
   - Add to utilityNavItems: { title: 'Market Mappings', url: '/mappings', icon: Map }
   - Import Map icon from lucide-react

Follow CoveragePage pattern for page structure.
  </action>
  <verify>
Navigate to /mappings shows the dashboard page, sidebar shows "Market Mappings" link
  </verify>
  <done>
Dashboard page renders at /mappings with hook fetching stats, sidebar has working navigation link
  </done>
</task>

<task type="auto">
  <name>Task 2: Create MappingStatsCards component</name>
  <files>web/src/features/mappings/components/stats-cards.tsx, web/src/features/mappings/components/index.ts, web/src/features/mappings/index.tsx</files>
  <action>
1. Create MappingStatsCards component following coverage/stats-cards.tsx pattern:
   - Grid layout: 2 cols mobile, 4 cols md, 5 cols lg
   - Cards with icons (use lucide-react):
     a. Total Mappings (Layers icon) - total_mappings count
     b. Code Mappings (Code icon) - code_mappings count, subtitle "Built-in"
     c. User Mappings (Database icon) - db_mappings count, subtitle "Custom overrides"
     d. Unmapped NEW (AlertCircle icon, orange) - unmapped_counts.new, subtitle "Needs attention"
     e. Coverage % (PieChart icon) - calculate (mapped count / total seen) if available

2. Add Skeleton loading state matching coverage stats pattern

3. Integrate into MappingDashboard page:
   - Import and render MappingStatsCards with useMappingStats data
   - Pass isLoading for skeleton state

Use Card, CardHeader, CardTitle, CardContent from shadcn/ui.
Color coding: green for total/code, blue for user mappings, orange for unmapped.
  </action>
  <verify>
Dashboard shows 5 stat cards with correct counts from API, skeleton shows during load
  </verify>
  <done>
Stats cards display all mapping metrics with proper styling and loading states
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Mapping Dashboard page with stats cards</what-built>
  <how-to-verify>
    1. Run: npm run dev (in web/ folder)
    2. Click "Market Mappings" in sidebar
    3. Verify: Page shows 5 stats cards with mapping counts
    4. Verify: Cards show skeleton during initial load
    5. Verify: Counts match API data (check /api/mappings/stats)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] /mappings route renders MappingDashboard
- [ ] Sidebar shows "Market Mappings" link with correct icon
- [ ] Stats cards display all 5 metrics
- [ ] Loading skeleton appears during data fetch
- [ ] No TypeScript errors, build passes
</verification>

<success_criteria>

- Dashboard page accessible at /mappings
- Sidebar navigation working
- 5 stats cards with correct icons and data
- Proper loading states
- Human verification approved
</success_criteria>

<output>
After completion, create `.planning/phases/103-mapping-dashboard/103-02-SUMMARY.md`
</output>
