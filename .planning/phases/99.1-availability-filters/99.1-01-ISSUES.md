# UAT Issues: Phase 99.1 Plan 1

**Tested:** 2026-02-12
**Source:** .planning/phases/99.1-availability-filters/99.1-01-SUMMARY.md
**Tester:** User via /gsd:verify-work

## Open Issues

### UAT-001: Alerts filter shows blank page, no API call made

**Discovered:** 2026-02-12
**Phase/Plan:** 99.1-01
**Severity:** Blocker
**Feature:** Alerts filter functionality
**Description:** When clicking the Alerts toggle (which shows a count > 0), the page goes blank and stays blank indefinitely. No API request is made according to the Network tab.
**Expected:** Clicking Alerts should trigger an API call to `/api/events?availability=alerts` and display filtered events with unavailable markets.
**Actual:** Page goes blank as if loading, no API call is made, page never recovers. User must refresh to reset.
**Repro:**
1. Go to Odds Comparison page
2. Note Alerts button shows a count > 0
3. Click Alerts toggle
4. Page goes blank and stays blank
5. Check Network tab - no API request made

**Status:** Partially resolved - API call now works but returns wrong data (see UAT-002)

### UAT-002: Alerts filter shows events with full coverage instead of unavailable markets

**Discovered:** 2026-02-12
**Phase/Plan:** 99.1-01
**Severity:** Blocker
**Feature:** Alerts filter logic
**Description:** When clicking Alerts, the filter returns events that have full coverage (odds from all bookmakers), not events with unavailable markets. Clicking through to Event Details shows all markets have normal odds, no strikethrough unavailable indicators.
**Expected:** Alerts filter should only return events where the LATEST snapshot has at least one market with `unavailable_at IS NOT NULL`.
**Actual:** Filter returns events based on ANY historical snapshot having unavailable_at, including old snapshots where markets were temporarily unavailable but have since become available again.
**Root Cause:** Both `/api/events/alerts/count` and the `availability=alerts` filter query ALL historical OddsSnapshots instead of filtering to only the LATEST snapshot per event/bookmaker (using `func.max(OddsSnapshot.id)` subquery pattern like `_load_latest_snapshots_for_events` does).
**Repro:**
1. Go to Odds Comparison page
2. Click Alerts toggle (shows count > 0)
3. Click on any event shown
4. Observe: All markets show normal odds, no strikethrough unavailable indicators

## Resolved Issues

### UAT-002: Alerts filter shows events with full coverage instead of unavailable markets

**Resolved:** 2026-02-12 - Fixed in 99.1-01-FIX2.md
**Commit:** f84906c
**Fix:** Modified both `/api/events/alerts/count` and `availability=alerts` filter to use latest snapshot subquery pattern (`func.max(OddsSnapshot.id)` grouped by event_id) instead of querying all historical snapshots.

---

*Phase: 99.1-availability-filters*
*Plan: 01*
*Tested: 2026-02-12*
