---
phase: 23-fix-match-rate-bug
plan: 01
type: execute
---

<objective>
Fix match rate displaying as 8774% instead of ~87.7% by removing double multiplication.

Purpose: The backend already returns match_rate as a percentage (0-100), but the frontend multiplies by 100 again.
Output: Correct match rate percentage display in the Coverage page stats cards.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/23-fix-match-rate-bug/23-CONTEXT.md

**Bug Location:**
@web/src/features/coverage/components/stats-cards.tsx

**API Contract:**
@src/api/schemas/palimpsest.py - Line 42-44: `match_rate: float = Field(description="Percentage of total events that are matched (0-100)")`

**Root Cause:**
Backend (palimpsest.py:144) returns `match_rate = (matched_count / total_events * 100)` → 87.7
Frontend (stats-cards.tsx:78) displays `(coverage.match_rate * 100).toFixed(1)%` → 8770%

The frontend incorrectly multiplies by 100 when the value is already a percentage.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove double percentage multiplication from match rate display</name>
  <files>web/src/features/coverage/components/stats-cards.tsx</files>
  <action>
On line 78, change:
```tsx
{coverage ? `${(coverage.match_rate * 100).toFixed(1)}% match rate` : 'No data'}
```

To:
```tsx
{coverage ? `${coverage.match_rate.toFixed(1)}% match rate` : 'No data'}
```

The backend already returns match_rate as 0-100, so multiplying by 100 is wrong.
  </action>
  <verify>
1. Run `npm run build --prefix web` to verify no type errors
2. Start dev server and visit Coverage page
3. Verify match rate shows ~87.7% instead of 8774%
  </verify>
  <done>Match rate displays as a proper percentage (e.g., 87.7%) instead of incorrectly inflated value (8774%)</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Fixed match rate percentage display in Coverage page stats cards</what-built>
  <how-to-verify>
    1. Start the dev server: `cd web && npm run dev`
    2. Visit http://localhost:5173/coverage
    3. Look at the "Matched" card's subtitle
    4. Verify it shows a reasonable percentage like "87.7% match rate" instead of "8774.0% match rate"
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build --prefix web` succeeds without errors
- [ ] Match rate displays as proper percentage (0-100 range)
- [ ] No TypeScript errors introduced
</verification>

<success_criteria>

- Match rate shows realistic percentage (~87.7% not 8774%)
- Build passes without errors
- Visual verification confirms fix
  </success_criteria>

<output>
After completion, create `.planning/phases/23-fix-match-rate-bug/23-01-SUMMARY.md`
</output>
