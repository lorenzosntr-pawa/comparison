---
phase: 48-event-summary-redesign
plan: 48-01-FIX
type: fix
---

<objective>
Fix 5 UAT issues from plan 48-01.

Source: 48-01-ISSUES.md
Priority: 0 critical, 1 major, 4 minor
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/48-event-summary-redesign/48-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/48-event-summary-redesign/48-01-PLAN.md

**Implementation file:**
@web/src/features/matches/components/summary-section.tsx
</context>

<tasks>

<task type="auto">
  <name>Fix UAT-001: Betpawa market count should only count markets with odds</name>
  <files>web/src/features/matches/components/summary-section.tsx</files>
  <action>
In the Market Coverage card calculation, currently counting all markets in the array.

Fix: Only count markets that have actual odds data available.

A market has odds if:
- It has an `outcomes` array with at least one outcome that has a non-null/non-undefined `odds` value
- OR check the specific data structure to determine what constitutes "has odds"

Look at the `BookmakerMarketData` type and `MarketWithCompetitorOdds` to understand what field indicates odds presence.

Likely fix: Filter markets before counting:
```typescript
const marketsWithOdds = markets.filter(m =>
  m.outcomes && m.outcomes.length > 0 &&
  m.outcomes.some(o => o.betpawa_odds != null || o.odds != null)
);
const count = marketsWithOdds.length;
```

This ensures Betpawa's count reflects actual available betting markets, not just the catalog.
  </action>
  <verify>
Visit event details page and verify:
- Market Coverage card shows Betpawa count that matches visible markets with odds
- Count is lower or equal to before (not counting empty markets)
  </verify>
  <done>Betpawa market count only includes markets with available odds</done>
</task>

<task type="auto">
  <name>Fix UAT-002, UAT-003, UAT-004: UI/Typography improvements</name>
  <files>web/src/features/matches/components/summary-section.tsx</files>
  <action>
Address three related styling issues:

**UAT-002: Category breakdown text too small**
- Increase font size for the category breakdown (Main/Goals/Handicaps/Other)
- Use `text-sm` instead of `text-xs` or equivalent
- Ensure readable at normal viewing distance

**UAT-003: Mapping Quality card UX improvement**
- Improve visual hierarchy and clarity
- Add clearer labels or better formatting
- Consider using badges or colored indicators for each bookmaker's matched count

**UAT-004: Font inconsistency across cards**
- Audit all three cards for typography consistency
- Ensure titles use same font-weight and size
- Ensure values/numbers use consistent sizing
- Ensure secondary text (labels, percentages) match

Apply consistent Tailwind classes across all cards:
- Card titles: `text-sm font-medium` consistently
- Main values/numbers: `text-2xl font-bold` consistently
- Secondary labels: `text-xs text-muted-foreground` consistently
- Category breakdowns: `text-sm` (not text-xs)
  </action>
  <verify>
Visit event details page and verify:
- Category breakdown text is readable (larger than before)
- All cards have visually consistent typography
- Mapping Quality card looks cleaner and clearer
  </verify>
  <done>Typography is consistent across all summary cards and category text is readable</done>
</task>

<task type="auto">
  <name>Fix UAT-005: Remove Key Markets card</name>
  <files>web/src/features/matches/components/summary-section.tsx</files>
  <action>
Remove the Key Markets card from the summary section.

1. Find the Key Markets card JSX and remove or comment out
2. Adjust grid layout from 4-column to 3-column:
   - Change `grid-cols-4` to `grid-cols-3`
   - Or use responsive: `grid-cols-1 md:grid-cols-3`

The summary section should now display only:
- Market Coverage
- Mapping Quality
- Competitive Position (with category breakdown)
  </action>
  <verify>
Visit event details page and verify:
- Only 3 cards display in summary section
- No Key Markets card visible
- Layout is balanced with 3-column grid
  </verify>
  <done>Key Markets card removed, summary shows 3-card layout</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All UAT issues fixed (UAT-001 through UAT-005)
- [ ] `npm run build` succeeds without errors
- [ ] Event details page loads without console errors
- [ ] Market Coverage shows accurate Betpawa count
- [ ] Typography is consistent across all cards
- [ ] 3-card layout displays properly
</verification>

<success_criteria>
- All 5 UAT issues from 48-01-ISSUES.md addressed
- Build passes
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/48-event-summary-redesign/48-01-FIX-SUMMARY.md`
</output>
